/*!
 * @flowlist/js-core v0.0.2
 * (c) 2020 falstack
 * https://github.com/flowlist/js-core#readme
 */
(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["jsCore"]=t():e["jsCore"]=t()})("undefined"!==typeof self?self:this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="fb15")}({8875:function(e,t,r){var n,o,i;(function(r,a){o=[],n=a,i="function"===typeof n?n.apply(t,o):n,void 0===i||(e.exports=i)})("undefined"!==typeof self&&self,(function(){function e(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==e&&document.currentScript)return document.currentScript;try{throw new Error}catch(h){var r,n,o,i=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,a=/@([^@]*):(\d+):(\d+)\s*$/gi,c=i.exec(h.stack)||a.exec(h.stack),u=c&&c[1]||!1,f=c&&c[2]||!1,l=document.location.href.replace(document.location.hash,""),s=document.getElementsByTagName("script");u===l&&(r=document.documentElement.outerHTML,n=new RegExp("(?:[^\\n]+?\\n){0,"+(f-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),o=r.replace(n,"$1").trim());for(var p=0;p<s.length;p++){if("interactive"===s[p].readyState)return s[p];if(s[p].src===u)return s[p];if(u===l&&s[p].innerHTML&&s[p].innerHTML.trim()===o)return s[p]}return null}}return e}))},"96cf":function(e,t,r){var n=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r,n){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=_(e,r,a),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}e.wrap=u;var l="suspendedStart",s="suspendedYield",p="executing",h="completed",y={};function d(){}function v(){}function g(){}var m={};m[i]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(L([])));w&&w!==r&&n.call(w,i)&&(m=w);var O=g.prototype=d.prototype=Object.create(m);function j(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function x(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"===typeof s&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var o;function i(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}this._invoke=i}function _(e,t,r){var n=l;return function(o,i){if(n===p)throw new Error("Generator is already running");if(n===h){if("throw"===o)throw i;return D()}r.method=o,r.arg=i;while(1){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var u=f(e,t,r);if("normal"===u.type){if(n=r.done?h:s,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=h,r.method="throw",r.arg=u.arg)}}}function k(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator["return"]&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method))return y;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=f(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(e){if(e){var r=e[i];if(r)return r.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){while(++o<e.length)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:D}}function D(){return{value:t,done:!0}}return v.prototype=O.constructor=g,g.constructor=v,g[c]=v.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},j(x.prototype),x.prototype[a]=function(){return this},e.AsyncIterator=x,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},j(O),O[c]="Generator",O[i]=function(){return this},O.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){while(t.length){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=L,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),f=n.call(a,"finallyLoc");if(u&&f){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}(e.exports);try{regeneratorRuntime=n}catch(o){Function("r","regeneratorRuntime = r")(n)}},a34a:function(e,t,r){e.exports=r("96cf")},fb15:function(e,t,r){"use strict";r.r(t);var n={};if(r.r(n),r.d(n,"initState",(function(){return M})),r.d(n,"initData",(function(){return q})),r.d(n,"loadMore",(function(){return G})),r.d(n,"updateState",(function(){return K})),"undefined"!==typeof window){var o=window.document.currentScript,i=r("8875");o=i(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:i});var a=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);a&&(r.p=a[1])}var c=r("a34a"),u=r.n(c);function f(e){return f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(s({},{result:[],noMore:!1,nothing:!1,loading:!1,error:null,extra:null,fetched:!1,page:0,total:0}),e)},y=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n="".concat(e,"-").concat(t);return Object.keys(r).filter((function(e){return!~["undefined","object","function"].indexOf(f(r[e]))&&!~["page","is_up","since_id","seen_ids","__refresh__","__reload__"].indexOf(e)})).sort().forEach((function(e){n+="-".concat(e,"-").concat(r[e])})),n},d=function(e,t){if(!t)return e;var r=e,n=j(t)?t:t.split(".");return n.forEach((function(e){r=r[e]})),r},v=function(e,t,r){if(/\./.test(t)){var n=t.split("."),o=n.pop(),i=e;n.forEach((function(e){i=i[e]})),i[o]=r}else e[t]=r},g=function(e,t,r){for(var n=-1,o=0;o<t.length;o++)if(d(t[o],r).toString()===e.toString()){n=o;break}return n},m=function(e,t,r){j(t)?t.forEach((function(t){var n=d(t,r).toString();e.forEach((function(o,i){d(o,r).toString()===n&&(e[i]=s(s({},o),t))}))})):Object.keys(t).forEach((function(n){var o=n.toString();e.forEach((function(i,a){d(i,r).toString()===o&&(e[a]=s(s({},i),t[n]))}))}))},b=function(e){var t=e.key,r=e.now;try{var n=localStorage.getItem("vue-mixin-store-".concat(t,"-expired-at")),o=localStorage.getItem("vue-mixin-store-".concat(t));return!n||!o||r-n>0?(O(t),null):JSON.parse(o)}catch(i){return O(t),null}},w=function(e){var t=e.key,r=e.value,n=e.expiredAt;try{localStorage.setItem("vue-mixin-store-".concat(t),JSON.stringify(r)),localStorage.setItem("vue-mixin-store-".concat(t,"-expired-at"),n)}catch(o){}},O=function(e){localStorage.removeItem("vue-mixin-store-".concat(e)),localStorage.removeItem("vue-mixin-store-".concat(e,"-expired-at"))},j=function(e){return"[object Array]"===Object.prototype.toString.call(e)},x=function(e,t,r,n,o){"jump"!==n?j(r)?e[t]=o?r.concat(e[t]||[]):(e[t]||[]).concat(r):"result"===t?(j(e[t])&&(e[t]={}),Object.keys(r).forEach((function(n){e[t][n]=e[t][n]?o?r[n].concat(e[t][n]):e[t][n].concat(r[n]):r[n]}))):e[t]=r:e[t]=r},_=function(e){var t=0;return j(e)?t=e.length:Object.keys(e).forEach((function(r){t+=e[r].length})),t},k=function(e){var t=e.field,r=e.uniqueKey,n=e.query,o=e.type,i={};if(t.fetched){var a=r||"id";"seenIds"===o?i.seen_ids=t.result.map((function(e){return d(e,a)})).join(","):"sinceId"===o?(i.since_id=d(t.result[n.is_up?0:t.result.length-1],a),i.is_up=n.is_up?1:0):"jump"===o?i.page=n.page:"page"===o&&(i.page=t.page+1)}else"seenIds"===o?i.seen_ids="":"sinceId"===o?(i.since_id=n.sinceId||(n.is_up?999999999:0),i.is_up=n.is_up?1:0):"jump"===o?i.page=n.page||t.page:"page"===o&&(i.page=t.page);return s(s({},n),i)},S="undefined"!==typeof window,P=(S&&(window.IntersectionObserver&&new window.IntersectionObserver((function(e){e.forEach((function(e){var t=e.intersectionRatio,r=e.target;t<=0||!r||r.__flow_handler__&&r.__flow_handler__()}))}))),function(e){var t=e.getter,r=e.setter,n=e.data,o=e.fieldName,i=e.type,a=e.fromLocal,c=e.cacheTimeout,u=e.page,f=e.insertBefore;if(a)r({key:o,type:0,value:n});else{var l=t(o);if(l){var s=n.result,p=n.extra;l.nothing=!l.fetched&&0===_(s),l.fetched=!0,l.total=n.total||0,l.noMore="jump"!==i&&(n.no_more||!1),l.page=u?parseInt(u):l.page+1,l.loading=!1,x(l,"result",s,i,f),p&&x(l,"extra",p,i,f),r({key:o,type:0,value:l}),c&&S&&!l.nothing&&w({key:o,value:l,expiredAt:Date.now()+1e3*c})}}}),E=function(e){var t=e.setter,r=e.fieldName,n=e.error;t({key:r,type:1,value:{error:n,loading:!1}})};function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(f){return void r(f)}c.done?t(u):Promise.resolve(u).then(n,o)}function N(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){I(i,n,o,a,c,"next",e)}function c(e){I(i,n,o,a,c,"throw",e)}a(void 0)}))}}var M=function(e){var t=e.getter,r=e.setter,n=e.query,o=e.type,i=e.func,a=e.opts,c=y(i,o,n),u=t(c);u||r({key:c,type:0,value:h(a||{})})},q=function(e){var t=e.getter,r=e.setter,n=e.query,o=e.type,i=e.func,a=e.api,c=e.cacheTimeout,f=e.uniqueKey,l=e.callback;return new Promise((function(e,s){var p=y(i,o,n),d=t(p),v=!!n.__refresh__,g=!!n.__reload__;if(d&&d.error&&!v)return e();if(d&&d.loading)return e();var m=d&&d.fetched&&!v;if(m)return e();var w,O=k({fetched:!1},f,n,o);O._extra=m&&d?d.extra:null;var j=!1,x=function(){var f=N(u.a.mark((function f(){var y;return u.a.wrap((function(u){while(1)switch(u.prev=u.next){case 0:if(u.prev=0,!c||!S){u.next=12;break}if(w=b({key:p,now:Date.now()}),!w){u.next=7;break}j=!0,u.next=10;break;case 7:return u.next=9,a[i](O);case 9:w=u.sent;case 10:u.next=15;break;case 12:return u.next=14,a[i](O);case 14:w=u.sent;case 15:y=function(){P({getter:t,setter:r,data:w,fieldName:p,type:o,fromLocal:j,cacheTimeout:c,page:O.page,insertBefore:!!n.is_up}),S&&l&&l({params:O,data:w,refresh:v})},g?r({key:p,type:0,value:h(),callback:y}):y(),e(),u.next=24;break;case 20:u.prev=20,u.t0=u["catch"](0),E({setter:r,fieldName:p,error:u.t0}),s(u.t0);case 24:case"end":return u.stop()}}),f,null,[[0,20]])})));return function(){return f.apply(this,arguments)}}();m||g?x():r({key:p,type:0,value:D(D({},h()),{},{loading:!0,error:null}),callback:x})}))},G=function(e){var t=e.getter,r=e.setter,n=e.query,o=e.type,i=e.func,a=e.api,c=e.cacheTimeout,f=e.uniqueKey,l=e.force,s=e.callback;return new Promise((function(e,p){var h=y(i,o,n),d=t(h);if(!d||d.loading||d.nothing||d.noMore&&!l)return e();if("jump"===o&&+n.page===d.page)return e();var v={loading:!0,error:null};"jump"===o&&(v.result=[],v.extra=null);var g=k(d,f,n,o);g._extra=d.extra;var m=function(){var f=N(u.a.mark((function f(){var l;return u.a.wrap((function(u){while(1)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,a[i](g);case 3:l=u.sent,P({getter:t,setter:r,data:l,fieldName:h,type:o,fromLocal:!1,cacheTimeout:c,page:g.page,insertBefore:!!n.is_up}),S&&s&&s({params:g,data:l,refresh:!1}),e(),u.next=13;break;case 9:u.prev=9,u.t0=u["catch"](0),E({setter:r,fieldName:h,error:u.t0}),p(u.t0);case 13:case"end":return u.stop()}}),f,null,[[0,9]])})));return function(){return f.apply(this,arguments)}}();r({key:h,type:1,value:v,callback:m})}))},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{uniqueKey:"id",changeKey:"result"},t=e.getter,r=e.setter,n=e.type,o=e.func,i=e.query,a=e.id,c=e.method,u=e.changeKey,f=e.value,l=e.cacheTimeout,s=e.uniqueKey,p=y(o,n,i),h=t(p);if(h){var d=computeResultLength(h.result);if("update"===c)if(j(h.result)){var b=g(a,h.result,s);v(h.result[b],u,f)}else{var w=u.split(".");w.pop();var O=getObjectDeepValue(h.result,w),x=g(a,O,s);O[x]=f}else if("modify"===c)v(h,u,f);else{var _=getObjectDeepValue(h,u),k=g(a,_,s);switch(c){case"push":j(f)?_=_.concat(f):_.push(f);break;case"unshift":j(f)?_=f.concat(_):_.unshift(f);break;case"delete":k>=0&&_.splice(k,1);break;case"insert-before":k>=0&&_.splice(k,0,f);break;case"insert-after":k>=0&&_.splice(k+1,0,f);break;case"patch":m(_,f,s);break}h[u]=_}var P=computeResultLength(h.result);h.total=h.total+P-d,h.nothing=0===P,r({key:p,type:0,value:h}),S&&l&&setDataToCache({key:p,value:h,expiredAt:Date.now()+1e3*l})}};function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var B=F({},n);t["default"]=B}})["default"]}));